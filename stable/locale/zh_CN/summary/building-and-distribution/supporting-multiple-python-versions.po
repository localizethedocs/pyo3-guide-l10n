msgid ""
msgstr ""
"Project-Id-Version: PyO3 user guide\n"
"POT-Creation-Date: 2025-12-16T11:33:17Z\n"
"PO-Revision-Date: \n"
"Last-Translator: \n"
"Language-Team: \n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Language: zh_CN\n"
"Plural-Forms: nplurals=1; plural=0;\n"

#: src/building-and-distribution/multiple-python-versions.md:1
msgid "Supporting multiple Python versions"
msgstr ""

#: src/building-and-distribution/multiple-python-versions.md:3
msgid ""
"PyO3 supports all actively-supported Python 3 and PyPy versions. As much as "
"possible, this is done internally to PyO3 so that your crate's code does not "
"need to adapt to the differences between each version. However, as Python "
"features grow and change between versions, PyO3 cannot offer a completely "
"identical API for every Python version. This may require you to add "
"conditional compilation to your crate or runtime checks for the Python "
"version."
msgstr ""

#: src/building-and-distribution/multiple-python-versions.md:5
msgid ""
"This section of the guide first introduces the `pyo3-build-config` crate, "
"which you can use as a `build-dependency` to add additional `#[cfg]` flags "
"which allow you to support multiple Python versions at compile-time."
msgstr ""

#: src/building-and-distribution/multiple-python-versions.md:7
msgid ""
"Second, we'll show how to check the Python version at runtime. This can be "
"useful when building for multiple versions with the `abi3` feature, where "
"the Python API compiled against is not always the same as the one in use."
msgstr ""

#: src/building-and-distribution/multiple-python-versions.md:9
msgid "Conditional compilation for different Python versions"
msgstr ""

#: src/building-and-distribution/multiple-python-versions.md:11
msgid ""
"The `pyo3-build-config` exposes multiple [`#[cfg]` flags](https://doc.rust-"
"lang.org/rust-by-example/attribute/cfg.html) which can be used to "
"conditionally compile code for a given Python version. PyO3 itself depends "
"on this crate, so by using it you can be sure that you are configured "
"correctly for the Python version PyO3 is building against."
msgstr ""

#: src/building-and-distribution/multiple-python-versions.md:13
msgid "This allows us to write code like the following"
msgstr ""

#: src/building-and-distribution/multiple-python-versions.md:26
msgid ""
"The following sections first show how to add these `#[cfg]` flags to your "
"build process, and then cover some common patterns flags in a little more "
"detail."
msgstr ""

#: src/building-and-distribution/multiple-python-versions.md:28
msgid ""
"To see a full reference of all the `#[cfg]` flags provided, see the [`pyo3-"
"build-cfg` docs](https://docs.rs/pyo3-build-config)."
msgstr ""

#: src/building-and-distribution/multiple-python-versions.md:30
msgid "Using `pyo3-build-config`"
msgstr ""

#: src/building-and-distribution/multiple-python-versions.md:32
msgid "You can use the `#[cfg]` flags in just two steps:"
msgstr ""

#: src/building-and-distribution/multiple-python-versions.md:34
msgid ""
"Add `pyo3-build-config` with the [`resolve-config`](../features.md#resolve-"
"config) feature enabled to your crate's build dependencies in `Cargo.toml`:"
msgstr ""

#: src/building-and-distribution/multiple-python-versions.md:36
msgid ""
"```toml\n"
"[build-dependencies]\n"
"pyo3-build-config = { git = \"https://github.com/pyo3/pyo3\", features = "
"[\"resolve-config\"] }\n"
"```"
msgstr ""

#: src/building-and-distribution/multiple-python-versions.md:41
msgid ""
"Add a [`build.rs`](https://doc.rust-lang.org/cargo/reference/build-scripts."
"html) file to your crate with the following contents:"
msgstr ""

#: src/building-and-distribution/multiple-python-versions.md:45
msgid "// If you have an existing build.rs file, just add this line to it.\n"
msgstr ""

#: src/building-and-distribution/multiple-python-versions.md:50
msgid "After these steps you are ready to annotate your code!"
msgstr ""

#: src/building-and-distribution/multiple-python-versions.md:52
msgid "Common usages of `pyo3-build-cfg` flags"
msgstr ""

#: src/building-and-distribution/multiple-python-versions.md:54
msgid ""
"The `#[cfg]` flags added by `pyo3-build-cfg` can be combined with all of "
"Rust's logic in the `#[cfg]` attribute to create very precise conditional "
"code generation. The following are some common patterns implemented using "
"these flags:"
msgstr ""

#: src/building-and-distribution/multiple-python-versions.md:60
msgid ""
"This `#[cfg]` marks code that will only be present on Python 3.7 and "
"upwards. There are similar options `Py_3_8`, `Py_3_9`, `Py_3_10` and so on "
"for each minor version."
msgstr ""

#: src/building-and-distribution/multiple-python-versions.md:66
msgid ""
"This `#[cfg]` marks code that will only be present on Python versions before "
"(but not including) Python 3.7."
msgstr ""

#: src/building-and-distribution/multiple-python-versions.md:72
msgid ""
"This `#[cfg]` marks code that is only available when building for the "
"unlimited Python API (i.e. PyO3's `abi3` feature is not enabled). This might "
"be useful if you want to ship your extension module as an `abi3` wheel and "
"also allow users to compile it from source to make use of optimizations only "
"possible with the unlimited API."
msgstr ""

#: src/building-and-distribution/multiple-python-versions.md:78
msgid ""
"This `#[cfg]` marks code which is available when running Python 3.9 or "
"newer, or when using the unlimited API with an older Python version. "
"Patterns like this are commonly seen on Python APIs which were added to the "
"limited Python API in a specific minor version."
msgstr ""

#: src/building-and-distribution/multiple-python-versions.md:84
msgid "This `#[cfg]` marks code which is running on PyPy."
msgstr ""

#: src/building-and-distribution/multiple-python-versions.md:86
msgid "Checking the Python version at runtime"
msgstr ""

#: src/building-and-distribution/multiple-python-versions.md:88
msgid ""
"When building with PyO3's `abi3` feature, your extension module will be "
"compiled against a specific [minimum version](../building-and-distribution."
"md#minimum-python-version-for-abi3) of Python, but may be running on newer "
"Python versions."
msgstr ""

#: src/building-and-distribution/multiple-python-versions.md:90
msgid ""
"For example with PyO3's `abi3-py38` feature, your extension will be compiled "
"as if it were for Python 3.8. If you were using `pyo3-build-config`, "
"`#[cfg(Py_3_8)]` would be present. Your user could freely install and run "
"your abi3 extension on Python 3.9."
msgstr ""

#: src/building-and-distribution/multiple-python-versions.md:92
msgid ""
"There's no way to detect your user doing that at compile time, so instead "
"you need to fall back to runtime checks."
msgstr ""

#: src/building-and-distribution/multiple-python-versions.md:94
msgid ""
"PyO3 provides the APIs [`Python::version()`](https://pyo3.rs/main/doc/pyo3/"
"marker/struct.Python.html#method.version) and [`Python::version_info()`]"
"(https://pyo3.rs/main/doc/pyo3/marker/struct.Python.html#method."
"version_info) to query the running Python version. This allows you to do the "
"following, for example:"
msgstr ""

#: src/building-and-distribution/multiple-python-versions.md:100
msgid "// PyO3 supports Python 3.7 and up.\n"
msgstr ""
